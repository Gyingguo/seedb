<div id="ctrl-queryBuilder" class="queryBuilder" ng-controller="QueryBuilderController" 
  ng-init="init(1)" data-query="[[query_num]]" style="display:none" >
  <div class = "row">
    <div class = "col-md-12">
      <!-- start nav -->
      <ul class="nav nav-tabs" id="builder_type">
        <li class="active"><a href="#sql" data-toggle="tab">SQL</a></li>
        <li><a href="#visual" data-toggle="tab">Visual Selection</a></li>
        <li><a href="#upload" data-toggle="tab">File Upload</a></li>
      </ul>
      <!-- end nav -->
      <!-- start nav tab content -->
      <div class="tab-content">
        <div class="tab-pane active" id="sql"> <!-- sql query row -->
          <br />
          <!-- select database and table -->
          <div class="row">
            <div class="col-md-3">
              <h4>Database:</h4>  
              <select ng-model="databaseName">
                <option ng-repeat="databaseNameOption in databaseNames">[[databaseNameOption]]</option>
              </select>
            </div>
            <div class="col-md-3">
              <h4>Table:</h4>
              <select ng-model="tableName">
                <option ng-repeat="tableNameOption in tableNames">[[tableNameOption]]</option>
              </select>
            </div>
          </div>
          <!-- end select database and table -->
          <br />
          <!-- predicate table -->
          <div class="row"> 
            <div class="col-md-8">  
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h4>Predicates</h4>
                </div>
                <div class="panel-content">
                  <table class="table table-striped">
                    <tr><th></th><th>Column Name</th><th>Operator</th><th>Value</th><th></th></tr>
                    <tr ng-repeat="predicate in predicates">
                      <td>where</td>
                      <td>
                        <select ng-model="predicate.columnName">
                          <option ng-repeat="columnName in columnNames" value="[[columnName]]">
                            [[columnName]]
                          </option>
                        </select>
                      </td>
                      <td>
                        <select ng-model="predicate.modifier">
                          <option>=</option>
                          <option>&lt;</option>
                          <option>&gt;</option>
                          <option>in</option>
                        </select>
                      </td>
                      <td>
                        <input type="text" ng-model="predicate.value" />
                      </td>
                      <td>
                        <a href="" ng-click="removePredicate(predicate)" class="btn btn-danger btn-xs">X</a>
                      </td>
                    </tr>
                    <tr>
                      <td colspan="100">
                        <a href="" ng-click="addPredicate()" class="btn btn-success btn-xs">+ Add Predicate</a>
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div> <!-- end predicate table -->

          <div class="row"> <!-- distributions row -->
            <div class="col-md-12">
              <h4>Distributions in data set</h4>
              <p>In the case of many unique values, only the 20 most common are displayed.</p>
              <div class="distributionCharts" data-query="[[query_num]]"></div>
              <div ng-repeat="(key, value) in drilldownPredicates">
                <pre>[[formatDrilldownPredicate(key, value)]]</pre>
                <a href="" ng-click="addDrillDownPredicate(key)" class="btn btn-success btn-xs">+ Add Predicate</a>
                <br />
              </div>
            </div>
          </div> <!-- end distributions row -->


        </div> <!-- end sql query row -->
        <div class="tab-pane" id="visual">Visual Selection Coming Soon</div>
        <div class="tab-pane" id="upload">Upload Coming Soon</div>
      </div>
      <!-- end nav tab content -->
      <br />
      <div class="row"> <!-- start done button row -->
        <div class = "col-md-5"></div>
        <div class = "col-md-2">
          <a href="" ng-click="done(query_num)" class="btn btn-lg btn-primary">Done</a>
          <br /><br />
        </div>
      </div> <!-- end done button row -->
    </div>
  </div>
</div>

<div id="ctrl-queryBuilder" class="queryBuilder" ng-controller="QueryBuilderController" 
  ng-init="init(2)" data-query="[[query_num]]" style="display:none" >
  <div class = "row">
    <div class = "col-md-12">
      <!-- start nav -->
      <ul class="nav nav-tabs" id="builder_type">
        <li class="active"><a href="#sql" data-toggle="tab">SQL</a></li>
        <li><a href="#visual" data-toggle="tab">Visual Selection</a></li>
        <li><a href="#upload" data-toggle="tab">File Upload</a></li>
      </ul>
      <!-- end nav -->

      <!-- start nav tab content -->
      <div class="tab-content">
        <div class="tab-pane active" id="sql"> <!-- sql query row -->
          <br />
          <!-- select database and table -->
          <div class="row">
            <div class="col-md-3">
              <h4>Database:</h4>  
              <select ng-model="databaseName">
                <option ng-repeat="databaseNameOption in databaseNames">[[databaseNameOption]]</option>
              </select>
            </div>
            <div class="col-md-3">
              <h4>Table:</h4>
              <select ng-model="tableName">
                <option ng-repeat="tableNameOption in tableNames">[[tableNameOption]]</option>
              </select>
            </div>
          </div>
          <!-- end select database and table -->
          <br />
          <!-- predicate table -->
          <div class="row"> 
            <div class="col-md-8">  
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h4>Predicates</h4>
                </div>
                <div class="panel-content">
                  <table class="table table-striped">
                    <tr><th></th><th>Column Name</th><th>Operator</th><th>Value</th><th></th></tr>
                    <tr ng-repeat="predicate in predicates">
                      <td>where</td>
                      <td>
                        <select ng-model="predicate.columnName">
                          <option ng-repeat="columnName in columnNames" value="[[columnName]]">
                            [[columnName]]
                          </option>
                        </select>
                      </td>
                      <td>
                        <select ng-model="predicate.modifier">
                          <option>=</option>
                          <option>&lt;</option>
                          <option>&gt;</option>
                          <option>in</option>
                        </select>
                      </td>
                      <td>
                        <input type="text" ng-model="predicate.value" />
                      </td>
                      <td>
                        <a href="" ng-click="removePredicate(predicate)" class="btn btn-danger btn-xs">X</a>
                      </td>
                    </tr>
                    <tr>
                      <td colspan="100">
                        <a href="" ng-click="addPredicate()" class="btn btn-success btn-xs">+ Add Predicate</a>
                    </td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div> <!-- end predicate table -->

          <div class="row"> <!-- distributions row -->
            <div class="col-md-12">
              <h4>Distributions in data set</h4>
              <p>In the case of many unique values, only the 20 most common are displayed.</p>
              <div class="distributionCharts" data-query="[[query_num]]"></div>
              <div ng-repeat="(key, value) in drilldownPredicates">
                <pre>[[formatDrilldownPredicate(key, value)]]</pre>
                <a href="" ng-click="addDrillDownPredicate(key)" class="btn btn-success btn-xs">+ Add Predicate</a>
                <br />
              </div>
            </div>
          </div> <!-- end distributions row -->


        </div> <!-- end sql query row -->
        <div class="tab-pane" id="visual">Visual Selection Coming Soon</div>
        <div class="tab-pane" id="upload">Upload Coming Soon</div>
      </div>
      <!-- end nav tab content -->
      <br />
      <div class="row"> <!-- start done button row -->
        <div class = "col-md-5"></div>
        <div class = "col-md-2">
          <a href="" ng-click="done(query_num)" class="btn btn-lg btn-primary">Done</a>
          <br /><br />
        </div>
      </div> <!-- end done button row -->
    </div>
  </div>
</div>
